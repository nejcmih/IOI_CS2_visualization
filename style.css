@font-face {
            font-family: 'Stratum2';
            src: url('fonts/stratumno2_bold.otf') format('opentype');
            font-weight: bold;
            font-style: normal;
        }

        body {
            background-color: #1b1b1b;
            color: #eee;
            font-family: 'Noto Sans', sans-serif;
            display: flex;
            flex-direction: row; 
            height: 100vh;       
            margin: 0;
            padding: 0;
            overflow: hidden;    
        }

        #sidebar {
            width: 340px; 
            min-width: 340px;
            background-color: #2a2a2a;
            border-right: 1px solid #444;
            display: flex;
            flex-direction: column;
            padding: 20px;
            gap: 15px; 
            overflow-y: auto; 
            box-shadow: 5px 0 15px rgba(0,0,0,0.5);
            z-index: 10;
        }

        h2 {
            font-family: 'Stratum2', sans-serif;
            font-size: 1.8em;
            text-transform: uppercase;
            letter-spacing: 2px;
            margin: 0;
            color: #fff;
            text-shadow: 0 0 10px rgba(255, 153, 0, 0.5);
            text-align: center;
        }

        button, select, input, .tab-btn, .radio-label, .checkbox-label {
            font-family: 'Noto Sans', sans-serif;
        }

        .tabs { 
            display: flex; gap: 5px; background: #1b1b1b; padding: 5px; 
            border-radius: 8px; border: 1px solid #444; justify-content: center;
        }
        .tab-btn { 
            background: none; border: none; color: #aaa; padding: 8px 12px; font-size: 14px; 
            cursor: pointer; border-radius: 6px; font-weight: 600; transition: all 0.2s; 
            flex-grow: 1; text-align: center;
        }
        .tab-btn:hover { background: #333; color: #fff; }
        .tab-btn.active { background: #ff9900; color: #111; }

        .control-group { display: flex; flex-direction: column; gap: 6px; width: 100%; }
        
        .control-header {
            font-size: 0.85em; font-weight: bold; color: #888; text-transform: uppercase;
            border-bottom: 1px solid #444; padding-bottom: 4px; margin-bottom: 4px;
        }

        .radio-label { cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 0.9em; font-weight: 600; margin-bottom: 4px; }
        .checkbox-label { cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 0.9em; font-weight: 700; }
        .checkbox-label input { transform: scale(1.2); cursor: pointer; }

        .separator { width: 100%; height: 1px; background: #444; margin: 2px 0; }

        select { 
            padding: 8px; border-radius: 4px; background: #333; color: #fff; 
            border: 1px solid #555; width: 100%; font-weight: 600; cursor: pointer; 
        }
        select:disabled { opacity: 0.5; cursor: not-allowed; }

        #ecoSelectorCT { border-left: 5px solid #5d79ae; }
        #ecoSelectorT { border-left: 5px solid #d32f2f; }

        .slider-row { display: flex; width: 100%; align-items: center; gap: 8px; }
        input[type=range] { width: 100%; cursor: pointer; }
        .slider-value { color: #ffaa00; font-weight: bold; float: right; }

        .play-btn {
            background: #444; border: 1px solid #666; color: #fff;
            width: 32px; height: 32px; border-radius: 4px;
            display: flex; align-items: center; justify-content: center;
            font-size: 14px; cursor: pointer; transition: background 0.2s;
        }
        .play-btn:hover { background: #555; border-color: #888; }
        .play-btn.active { background: #ff9900; border-color: #ff9900; color: #000; }


        #prediction-panel {
            background: #222; border: 1px solid #555; border-radius: 8px; padding: 15px;
            display: flex; flex-direction: column; gap: 15px; margin-top: 5px;
        }
        .pred-title { 
            font-family: 'Stratum2'; font-size: 1.4em; text-align: center; color: #fff; 
            border-bottom: 2px solid #2196f3; padding-bottom: 5px; margin-bottom: 5px;
        }
        .pred-row { display: flex; justify-content: space-between; align-items: flex-start; }
        .site-col { display: flex; flex-direction: column; align-items: center; width: 45%; }
        .site-header { font-family: 'Stratum2'; font-size: 2.5em; font-weight: bold; margin-bottom: 10px; }
        
        .site-stat { text-align: center; margin-bottom: 12px; width: 100%; }
        .stat-label { font-size: 0.75em; color: #aaa; text-transform: uppercase; margin-bottom: 2px; }
        .stat-val { font-size: 1.3em; font-weight: bold; color: #fff; }
        

        .stat-val.high { color: #4caf50; text-shadow: 0 0 5px rgba(76, 175, 80, 0.4); } 
        .stat-val.med { color: #ffeb3b; text-shadow: 0 0 5px rgba(255, 235, 59, 0.4); }
        .stat-val.low { color: #f44336; text-shadow: 0 0 5px rgba(244, 67, 54, 0.4); } 


        .vis-area {
            flex-grow: 1; background-color: #000; display: flex;
            justify-content: center; align-items: center; padding: 20px; position: relative;
        }

        .vis-container {
            position: relative; aspect-ratio: 1 / 1; height: 100%; width: auto;
            max-width: 100%; box-shadow: 0 0 50px rgba(0,0,0,0.8);
            border: 2px solid #333; overflow: hidden; background: #000;
        }

        .map-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-size: contain; background-repeat: no-repeat; background-position: center;
            opacity: 0.5; z-index: 0; transition: background-image 0.3s ease;
        }
        canvas { 
            position: absolute; top: 0; left: 0; z-index: 1; mix-blend-mode: lighter; 
            width: 100%; height: 100%; transition: opacity 0.3s ease;
        }


        .loader-overlay {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.85);
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            z-index: 100;
            backdrop-filter: blur(8px);
            transition: opacity 0.4s ease;
            pointer-events: all;
        }
        .loader-overlay.hidden { opacity: 0; pointer-events: none; }
        .spinner {
            width: 50px; height: 50px; border: 5px solid #333; border-top: 5px solid #ff9900;
            border-radius: 50%; animation: spin 1s linear infinite; margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        .loading-text {
            font-family: 'Stratum2', sans-serif;
            font-size: 1.5em; color: #fff; letter-spacing: 2px;
            text-transform: uppercase;
            text-shadow: 0 0 10px rgba(255, 153, 0, 0.6);
        }


        .legend-overlay {
            position: absolute; bottom: 20px; right: 20px;
            background: rgba(0,0,0,0.7); padding: 10px 15px; border-radius: 6px;
            border: 1px solid #444; display: flex; gap: 15px; pointer-events: none;
        }
        .legend-item { display: flex; align-items: center; gap: 6px; font-weight: bold; font-size: 0.9em; }
        .dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }